<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Income Generation | Lion Global Investors</title>

  <!-- Open Graph Title -->
  <meta property="og:title" content="Income Generation | Lion Global Investors">

  <!-- Optional: Specify the type of content -->
  <meta property="og:type" content="website">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css" />

</head>

<body>
  <!-- <div id="loading-screen" style="display: flex; justify-content: center; align-items: center; max-height: 200px; max-width: 200px; background: url('loading.gif') no-repeat center center;">
    <h1>Calculating your results...</h1>
  </div> -->
  <!-- <div id="loading-screen" class="spinner">
    <div class="spinner-icon"></div>
    <h1>Calculating your results...</h1>
  </div> -->

  <div class="center-wrapper">
    <section class="uk-container uk-container-small">
      <div class="uk-card uk-card-default uk-card-body">
        <img id="loading" src="pic/loading2.jpg" alt="Cover" class="uk-width-1-1 cover-img">
        <img id="result-anim" src="pic/results-anim.gif" alt="Animation" class="uk-width-1-1 cover-img"
          style="display: none;">
        <div id="plane-button" class="lets-fly-info">
          <a href="#" class="next-button-link">
            <img src="icon/plane.png" class="next-button">
          </a>
        </div>
      </div>
    </section>
  </div>

  <div class="ans-wrapper">
    <div class="uk-container uk-container-small">
      <div class="uk-card uk-card-default uk-card-body quiz-ans-card">

        <div class="ans-banner-container">
          <img class="main-img ans-banner-img" src="pic/income.jpg" alt="Income Generation">
          <a href="https://www.lionglobalinvestors.com/en/fund-centre.html?&retire_goals=Income%20Generation" class="link-to-fund-centre">
            <button class="result-button result-income">Income Generation</button>
          </a>
        </div>

        <div class="share-results">
          <p>Share your quiz results!</p>
          <div class="social-media-icons">
            <a href="#" id="shareResult" class="share-links instagram" target="_blank">
              <img src="icon/share_clear.png" alt="social-media" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>

</html>

<script>
  let currentState = 'loading'; // Tracks current display state

  document.addEventListener('click', () => {
    switch (currentState) {
      case 'loading':
        // Hide loading image and show animation        
        document.getElementById('loading').style.display = 'none';
        document.getElementById('result-anim').style.display = 'block';
        currentState = 'animation';
        break;

      case 'animation':
        // Hide animation and show results
        document.getElementById('plane-button').style.display = 'none';
        document.getElementById('result-anim').style.display = 'none';
        const ansWrapper = document.querySelector('.ans-wrapper');
        ansWrapper.style.display = 'flex';
        ansWrapper.style.justifyContent = 'center';
        ansWrapper.style.alignItems = 'flex-start';
        ansWrapper.style.marginTop = '20px';
        currentState = 'results';
        break;
    }
  });

  document.getElementById("shareResult").addEventListener("click", async (event) => {
    event.preventDefault();
    const mainImage = document.querySelector('.ans-banner-img');
    if (mainImage && mainImage.getAttribute('src')) {
      const URL = mainImage.getAttribute('src');
      const response = await fetch(URL.toString());
      const blob = await response.blob();
      const filesArray = [
        new File([blob], `pic/income.jpg`, {
          type: 'image/jpg',
          lastModified: new Date().getTime(),
        }),
      ];
      const shareData = {
        files: filesArray,
      };
      if (navigator.canShare && navigator.canShare(shareData)) {
        await navigator.share(shareData);
      } else {
        alert(`navigator.share doesn't support in your device`);
      }
    }
  });
</script>